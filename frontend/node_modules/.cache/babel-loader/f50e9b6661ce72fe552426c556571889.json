{"ast":null,"code":"var _jsxFileName = \"/Users/sebastianwebster/GitHub/SebMedia-2.0/frontend/src/routes/Profile.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useState, useEffect, useMemo, Fragment, useReducer } from 'react';\nimport { CredentialsContext } from '../context/CredentialsContext';\nimport useComponent from '../hooks/useComponent';\nimport ToggleButton from '@mui/material/ToggleButton';\nimport ToggleButtonGroup from '@mui/material/ToggleButtonGroup';\nimport Box from '@mui/material/Box';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport axios from 'axios';\nimport TextPost from '../components/TextPost';\nimport Grid from '@mui/material/Grid';\nimport ImagePost from '../components/ImagePost';\nimport { defaultPfp } from '../constants';\nimport { useFilePicker } from 'use-file-picker';\nimport { DarkModeContext } from '../context/DarkModeContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar _ = require('lodash');\n\nconst Profile = () => {\n  _s();\n\n  const {\n    storedCredentials,\n    setStoredCredentials\n  } = useContext(CredentialsContext);\n  const {\n    FlexRowCentreDiv,\n    FlexColumnCentreDiv,\n    FlexRowSpaceAroundDiv,\n    H3NoMargin\n  } = useComponent();\n  const {\n    name,\n    followers,\n    following,\n    profileImageKey,\n    _id,\n    publicId\n  } = storedCredentials;\n  const [view, setView] = useState('textPosts');\n  const [openProfileImageFileSelector, {\n    plainFiles: profileImageToUpload,\n    loading: profileImageFileLoading\n  }] = useFilePicker({\n    accept: 'image/jpeg',\n    multiple: false\n  });\n  const [profileImageUploading, setProfileImageUploading] = useState(false);\n  const {\n    darkMode,\n    setDarkMode\n  } = useContext(DarkModeContext);\n\n  const textPostReducer = (state, action) => {\n    switch (action.type) {\n      case 'error':\n        console.error(action.error);\n        return { ...state,\n          error: action.error,\n          loading: false\n        };\n\n      case 'nowLoading':\n        return { ...state,\n          loading: true,\n          error: null\n        };\n\n      case 'addPosts':\n        console.log(action.result);\n\n        if (Array.isArray(action.result) && action.result.length > 0) {\n          const newTextPosts = Array.isArray(state.posts) ? _.cloneDeep(state.posts) : [];\n          newTextPosts.push(...action.result);\n          return { ...state,\n            posts: newTextPosts,\n            loading: false,\n            error: null\n          };\n        } else return Array.isArray(state.posts) ? { ...state,\n          posts: [...action.result, ...state.posts],\n          loading: false,\n          error: null\n        } : { ...state,\n          posts: []\n        };\n\n      case 'likePost':\n        const likePostIndex = state.posts.findIndex(item => item.postId === action.postId);\n\n        if (likePostIndex === -1) {\n          alert('Cannot find post to like');\n          return { ...state\n          };\n        }\n\n        const newPostsAfterLike = state.posts;\n        newPostsAfterLike[likePostIndex].liked = true;\n        return { ...state,\n          posts: newPostsAfterLike,\n          reRenderTimes: state.reRenderTimes + 1\n        };\n\n      case 'unlikePost':\n        const unlikePostIndex = state.posts.findIndex(item => item.postId === action.postId);\n\n        if (unlikePostIndex === -1) {\n          alert('Cannot find post to unlike');\n          return { ...state\n          };\n        }\n\n        const newPostsAfterUnlike = state.posts;\n        newPostsAfterUnlike[unlikePostIndex].liked = false;\n        return { ...state,\n          posts: newPostsAfterUnlike,\n          reRenderTimes: state.reRenderTimes + 1\n        };\n\n      case 'deletePost':\n        const deletePostIndex = state.posts.findIndex(item => item.postId === action.postId);\n\n        if (deletePostIndex === -1) {\n          alert('Cannot find post to delete');\n          return { ...state\n          };\n        }\n\n        const newPostsAfterDelete = state.posts;\n        newPostsAfterDelete.splice(deletePostIndex, 1);\n        return { ...state,\n          posts: newPostsAfterDelete,\n          reRenderTimes: state.reRenderTimes + 1\n        };\n\n      case 'turnOnEditMode':\n        const turnOnEditIndex = state.posts.findIndex(item => item.postId === action.postId);\n\n        if (turnOnEditIndex === -1) {\n          alert('Cannot find post to edit');\n          return { ...state\n          };\n        }\n\n        const newPostsAfterTurningEditModeOn = state.posts;\n        newPostsAfterTurningEditModeOn[turnOnEditIndex].editMode = true;\n        return { ...state,\n          posts: newPostsAfterTurningEditModeOn,\n          reRenderTimes: state.reRenderTimes + 1\n        };\n\n      case 'turnOffEditMode':\n        const turnOffEditIndex = state.posts.findIndex(item => item.postId === action.postId);\n\n        if (turnOffEditIndex === -1) {\n          alert('Cannot find post to edit');\n          return { ...state\n          };\n        }\n\n        const newPostsAfterTurningEditModeOff = state.posts;\n        newPostsAfterTurningEditModeOff[turnOffEditIndex].editMode = false;\n        return { ...state,\n          posts: newPostsAfterTurningEditModeOff,\n          reRenderTimes: state.reRenderTimes + 1\n        };\n\n      default:\n        throw new Error(action.type + ' is not a valid action for textPostReducer');\n    }\n  };\n\n  const textPostReducerInitialState = {\n    posts: null,\n    error: null,\n    loading: false,\n    reRenderTimes: 0\n  };\n\n  const imagePostReducer = (state, action) => {\n    switch (action.type) {\n      case 'error':\n        console.error(action.error);\n        return { ...state,\n          error: action.error,\n          loading: false\n        };\n\n      case 'nowLoading':\n        return { ...state,\n          loading: true,\n          error: null\n        };\n\n      case 'addPosts':\n        console.log(action.result);\n\n        if (Array.isArray(action.result) && action.result.length > 0) {\n          const newTextPosts = Array.isArray(state.posts) ? _.cloneDeep(state.posts) : [];\n          newTextPosts.push(...action.result);\n          return { ...state,\n            posts: newTextPosts,\n            loading: false,\n            error: null\n          };\n        } else return Array.isArray(state.posts) ? { ...state,\n          posts: [...action.result, ...state.posts],\n          loading: false,\n          error: null\n        } : { ...state,\n          posts: []\n        };\n\n      case 'likePost':\n        const likePostIndex = state.posts.findIndex(item => item.postId === action.postId);\n\n        if (likePostIndex === -1) {\n          alert('Cannot find post to like');\n          return;\n        }\n\n        const newPostsAfterLike = state.posts;\n        newPostsAfterLike[likePostIndex].liked = true;\n        return { ...state,\n          posts: newPostsAfterLike,\n          reRenderTimes: state.reRenderTimes + 1\n        };\n\n      case 'unlikePost':\n        const unlikePostIndex = state.posts.findIndex(item => item.postId === action.postId);\n\n        if (unlikePostIndex === -1) {\n          alert('Cannot find post to like');\n          return;\n        }\n\n        const newPostsAfterUnlike = state.posts;\n        newPostsAfterUnlike[unlikePostIndex].liked = false;\n        return { ...state,\n          posts: newPostsAfterUnlike,\n          reRenderTimes: state.reRenderTimes + 1\n        };\n\n      case 'deletePost':\n        const deletePostIndex = state.posts.findIndex(item => item.postId === action.postId);\n\n        if (deletePostIndex === -1) {\n          alert('Cannot find post to delete');\n          return { ...state\n          };\n        }\n\n        const newPostsAfterDelete = state.posts;\n        newPostsAfterDelete.splice(deletePostIndex, 1);\n        return { ...state,\n          posts: newPostsAfterDelete,\n          reRenderTimes: state.reRenderTimes + 1\n        };\n\n      case 'turnOnEditMode':\n        const turnOnEditIndex = state.posts.findIndex(item => item.postId === action.postId);\n\n        if (turnOnEditIndex === -1) {\n          alert('Cannot find post to edit');\n          return { ...state\n          };\n        }\n\n        const newPostsAfterTurningEditModeOn = state.posts;\n        newPostsAfterTurningEditModeOn[turnOnEditIndex].editMode = true;\n        return { ...state,\n          posts: newPostsAfterTurningEditModeOn,\n          reRenderTimes: state.reRenderTimes + 1\n        };\n\n      case 'turnOffEditMode':\n        const turnOffEditIndex = state.posts.findIndex(item => item.postId === action.postId);\n\n        if (turnOffEditIndex === -1) {\n          alert('Cannot find post to edit');\n          return { ...state\n          };\n        }\n\n        const newPostsAfterTurningEditModeOff = state.posts;\n        newPostsAfterTurningEditModeOff[turnOffEditIndex].editMode = false;\n        return { ...state,\n          posts: newPostsAfterTurningEditModeOff,\n          reRenderTimes: state.reRenderTimes + 1\n        };\n\n      default:\n        throw new Error(action.type + ' is not a valid action for textPostReducer');\n    }\n  };\n\n  const imagePostReducerInitialState = {\n    posts: null,\n    error: null,\n    loading: false,\n    reRenderTimes: 0\n  };\n  const [textPostState, dispatchTextPostUpdate] = useReducer(textPostReducer, textPostReducerInitialState);\n  const [imagePostState, dispatchImagePostUpdate] = useReducer(imagePostReducer, imagePostReducerInitialState);\n  const loadPosts = {\n    textPosts: () => {\n      if (textPostState.loading === false) {\n        dispatchTextPostUpdate({\n          type: 'nowLoading'\n        });\n        axios.get(`http://localhost:8080/user/textPostsByUserName/?username=${name}&skip=${Array.isArray(textPostState.posts) ? textPostState.posts.length : 0}&publicId=${publicId}`).then(response => response.data.data).then(result => {\n          dispatchTextPostUpdate({\n            type: 'addPosts',\n            result\n          });\n        }).catch(error => {\n          var _error$response, _error$response$data;\n\n          dispatchTextPostUpdate({\n            type: 'error',\n            error: (error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || String(error)\n          });\n        });\n      }\n    },\n    imagePosts: () => {\n      if (imagePostState.loading === false) {\n        dispatchImagePostUpdate({\n          type: 'nowLoading'\n        });\n        axios.get(`http://localhost:8080/user/imagePostsByUserName/?username=${name}&skip=${Array.isArray(imagePostState.posts) ? imagePostState.posts.length : 0}&publicId=${publicId}`).then(response => response.data.data).then(result => {\n          dispatchImagePostUpdate({\n            type: 'addPosts',\n            result\n          });\n        }).catch(error => {\n          var _error$response2, _error$response2$data;\n\n          dispatchImagePostUpdate({\n            type: 'error',\n            error: (error === null || error === void 0 ? void 0 : (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.error) || String(error)\n          });\n        });\n      }\n    }\n  };\n  useEffect(() => {\n    loadPosts.textPosts();\n  }, []);\n\n  const handleViewChange = (event, nextView) => {\n    if (nextView !== view && nextView !== null) {\n      setView(nextView);\n      if (nextView === 'textPosts' && textPostState.posts === null) loadPosts.textPosts();\n      if (nextView === 'imagePosts' && imagePostState.posts === null) loadPosts.imagePosts();\n    }\n\n    if (nextView === null) {\n      loadPosts[view]();\n    }\n  };\n\n  const DisplayTextPosts = useMemo(() => {\n    return Array.isArray(textPostState.posts) ? textPostState.posts.map((post, index) => /*#__PURE__*/_jsxDEV(Fragment, {\n      children: /*#__PURE__*/_jsxDEV(TextPost, { ...post,\n        publicId: publicId,\n        dispatch: dispatchTextPostUpdate,\n        userId: _id\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 17\n      }, this)\n    }, index.toString(), false, {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 13\n    }, this)) : null;\n  }, [textPostState.posts, textPostState.reRenderTimes]);\n  const DisplayImagePosts = useMemo(() => {\n    return Array.isArray(imagePostState.posts) ? imagePostState.posts.map((post, index) => /*#__PURE__*/_jsxDEV(Fragment, {\n      children: /*#__PURE__*/_jsxDEV(ImagePost, { ...post,\n        publicId: publicId,\n        dispatch: dispatchImagePostUpdate,\n        userId: _id\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 17\n      }, this)\n    }, index.toString(), false, {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 13\n    }, this)) : null;\n  }, [imagePostState.posts, imagePostState.reRenderTimes]);\n  useEffect(() => {\n    console.log(profileImageToUpload[0]);\n\n    if (profileImageToUpload[0]) {\n      setProfileImageUploading(true);\n      const toSend = new FormData();\n      toSend.append('image', profileImageToUpload[0]);\n      toSend.append('_id', _id);\n      axios.post('http://localhost:8080/user/updateProfileImage', toSend, {\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'multipart/form-data'\n        }\n      }).then(response => response.data.data).then(result => {\n        const newStoredCredentials = _.cloneDeep(storedCredentials);\n\n        newStoredCredentials.profileImageKey = result;\n\n        if (localStorage.getItem('SebMediaCredentials')) {\n          localStorage.setItem('SebMediaCredentials', JSON.stringify(newStoredCredentials));\n        }\n\n        setStoredCredentials(newStoredCredentials);\n        setProfileImageUploading(false);\n      }).catch(error => {\n        var _error$response3, _error$response3$data;\n\n        alert('Error uploading profile image: ' + ((error === null || error === void 0 ? void 0 : (_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.error) || String(error)));\n        console.error(error);\n        setProfileImageUploading(false);\n      });\n    }\n  }, [profileImageToUpload]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(FlexRowSpaceAroundDiv, {\n      children: [/*#__PURE__*/_jsxDEV(FlexRowCentreDiv, {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 21\n        }, this), profileImageUploading || profileImageFileLoading ? /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            justifyContent: 'center',\n            width: 40,\n            height: 40,\n            marginLeft: 1\n          },\n          children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n          onClick: () => openProfileImageFileSelector(),\n          src: profileImageKey ? `http://localhost:8080/image/${profileImageKey}` : defaultPfp,\n          style: {\n            width: 50,\n            height: 50,\n            borderRadius: '100%',\n            marginLeft: 10,\n            cursor: 'pointer'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(FlexColumnCentreDiv, {\n        children: [/*#__PURE__*/_jsxDEV(H3NoMargin, {\n          children: followers.length\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(H3NoMargin, {\n          children: \"Followers\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(FlexColumnCentreDiv, {\n        children: [/*#__PURE__*/_jsxDEV(H3NoMargin, {\n          children: following.length\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(H3NoMargin, {\n          children: \"Following\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(ToggleButtonGroup, {\n      color: \"primary\",\n      value: view,\n      exclusive: true,\n      onChange: handleViewChange,\n      fullWidth: true,\n      sx: {\n        mb: 3\n      },\n      children: [/*#__PURE__*/_jsxDEV(ToggleButton, {\n        value: \"textPosts\",\n        sx: {\n          color: darkMode ? 'white' : 'black',\n          borderColor: darkMode ? 'white' : 'black'\n        },\n        children: \"Text Posts\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ToggleButton, {\n        value: \"imagePosts\",\n        sx: {\n          color: darkMode ? 'white' : 'black',\n          borderColor: darkMode ? 'white' : 'black'\n        },\n        children: \"Image Posts\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 13\n    }, this), view === 'textPosts' ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: textPostState.error ? /*#__PURE__*/_jsxDEV(\"h1\", {\n        style: {\n          color: 'red',\n          textAlign: 'center'\n        },\n        children: textPostState.error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 29\n      }, this) : textPostState.loading ? /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          justifyContent: 'center',\n          mt: 3\n        },\n        children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 33\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 29\n      }, this) : Array.isArray(textPostState.posts) && textPostState.posts.length === 0 ? /*#__PURE__*/_jsxDEV(\"h1\", {\n        style: {\n          textAlign: 'center'\n        },\n        children: [name, \" has no text posts.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 29\n      }, this) : /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 2,\n        children: DisplayTextPosts\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 29\n      }, this)\n    }, void 0, false) : view === 'imagePosts' ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: imagePostState.error ? /*#__PURE__*/_jsxDEV(\"h1\", {\n        style: {\n          color: 'red',\n          textAlign: 'center'\n        },\n        children: imagePostState.error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 29\n      }, this) : imagePostState.loading ? /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          justifyContent: 'center',\n          mt: 3\n        },\n        children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 33\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 29\n      }, this) : Array.isArray(imagePostState.posts) && imagePostState.posts.length === 0 ? /*#__PURE__*/_jsxDEV(\"h1\", {\n        style: {\n          textAlign: 'center'\n        },\n        children: [name, \" has no image posts.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 29\n      }, this) : /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 2,\n        children: DisplayImagePosts\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 29\n      }, this)\n    }, void 0, false) : /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Pretty big error occured\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 360,\n      columnNumber: 15\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Profile, \"+mT8e7oxm6ZMJCipFb594+HOxYc=\", false, function () {\n  return [useComponent, useFilePicker];\n});\n\n_c = Profile;\nexport default Profile;\n\nvar _c;\n\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"names":["React","useContext","useState","useEffect","useMemo","Fragment","useReducer","CredentialsContext","useComponent","ToggleButton","ToggleButtonGroup","Box","CircularProgress","axios","TextPost","Grid","ImagePost","defaultPfp","useFilePicker","DarkModeContext","_","require","Profile","storedCredentials","setStoredCredentials","FlexRowCentreDiv","FlexColumnCentreDiv","FlexRowSpaceAroundDiv","H3NoMargin","name","followers","following","profileImageKey","_id","publicId","view","setView","openProfileImageFileSelector","plainFiles","profileImageToUpload","loading","profileImageFileLoading","accept","multiple","profileImageUploading","setProfileImageUploading","darkMode","setDarkMode","textPostReducer","state","action","type","console","error","log","result","Array","isArray","length","newTextPosts","posts","cloneDeep","push","likePostIndex","findIndex","item","postId","alert","newPostsAfterLike","liked","reRenderTimes","unlikePostIndex","newPostsAfterUnlike","deletePostIndex","newPostsAfterDelete","splice","turnOnEditIndex","newPostsAfterTurningEditModeOn","editMode","turnOffEditIndex","newPostsAfterTurningEditModeOff","Error","textPostReducerInitialState","imagePostReducer","imagePostReducerInitialState","textPostState","dispatchTextPostUpdate","imagePostState","dispatchImagePostUpdate","loadPosts","textPosts","get","then","response","data","catch","String","imagePosts","handleViewChange","event","nextView","DisplayTextPosts","map","post","index","toString","DisplayImagePosts","toSend","FormData","append","headers","Accept","newStoredCredentials","localStorage","getItem","setItem","JSON","stringify","display","justifyContent","width","height","marginLeft","borderRadius","cursor","mb","color","borderColor","textAlign","mt"],"sources":["/Users/sebastianwebster/GitHub/SebMedia-2.0/frontend/src/routes/Profile.js"],"sourcesContent":["import React, {useContext, useState, useEffect, useMemo, Fragment, useReducer} from 'react';\nimport { CredentialsContext } from '../context/CredentialsContext';\nimport useComponent from '../hooks/useComponent';\nimport ToggleButton from '@mui/material/ToggleButton';\nimport ToggleButtonGroup from '@mui/material/ToggleButtonGroup';\nimport Box from '@mui/material/Box';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport axios from 'axios';\nimport TextPost from '../components/TextPost';\nimport Grid from '@mui/material/Grid'\nimport ImagePost from '../components/ImagePost';\nimport { defaultPfp } from '../constants';\nimport { useFilePicker } from 'use-file-picker';\nimport { DarkModeContext } from '../context/DarkModeContext';\n\nvar _ = require('lodash')\n\nconst Profile = () => {\n    const {storedCredentials, setStoredCredentials} = useContext(CredentialsContext)\n    const { FlexRowCentreDiv, FlexColumnCentreDiv, FlexRowSpaceAroundDiv, H3NoMargin } = useComponent()\n    const {name, followers, following, profileImageKey, _id, publicId} = storedCredentials;\n    const [view, setView] = useState('textPosts')\n    const [openProfileImageFileSelector, { plainFiles: profileImageToUpload, loading: profileImageFileLoading}] = useFilePicker({accept: 'image/jpeg', multiple: false})\n    const [profileImageUploading, setProfileImageUploading] = useState(false);\n    const {darkMode, setDarkMode} = useContext(DarkModeContext);\n\n    const textPostReducer = (state, action) => {\n        switch(action.type) {\n            case 'error':\n                console.error(action.error)\n                return {...state, error: action.error, loading: false}\n            case 'nowLoading':\n                return {...state, loading: true, error: null}\n            case 'addPosts':\n                console.log(action.result)\n                if (Array.isArray(action.result) && action.result.length > 0) {\n                    const newTextPosts = Array.isArray(state.posts) ? _.cloneDeep(state.posts) : []\n                    newTextPosts.push(...action.result)\n                    return {...state, posts: newTextPosts, loading: false, error: null}\n                } else return Array.isArray(state.posts) ? {...state, posts: [...action.result, ...state.posts], loading: false, error: null} : {...state, posts: []}\n            case 'likePost':\n                const likePostIndex = state.posts.findIndex(item => item.postId === action.postId)\n                if (likePostIndex === -1) {\n                    alert('Cannot find post to like')\n                    return {...state}\n                }\n\n                const newPostsAfterLike = state.posts;\n                newPostsAfterLike[likePostIndex].liked = true;\n                \n                return {...state, posts: newPostsAfterLike, reRenderTimes: state.reRenderTimes + 1}\n            case 'unlikePost':\n                const unlikePostIndex = state.posts.findIndex(item => item.postId === action.postId)\n                if (unlikePostIndex === -1) {\n                    alert('Cannot find post to unlike')\n                    return {...state}\n                }\n                \n                const newPostsAfterUnlike = state.posts;\n                newPostsAfterUnlike[unlikePostIndex].liked = false;\n                \n                return {...state, posts: newPostsAfterUnlike, reRenderTimes: state.reRenderTimes + 1}\n            case 'deletePost':\n                const deletePostIndex = state.posts.findIndex(item => item.postId === action.postId)\n                if (deletePostIndex === -1) {\n                    alert('Cannot find post to delete')\n                    return {...state}\n                }\n\n                const newPostsAfterDelete = state.posts;\n                newPostsAfterDelete.splice(deletePostIndex, 1)\n\n                return {...state, posts: newPostsAfterDelete, reRenderTimes: state.reRenderTimes + 1}\n            case 'turnOnEditMode':\n                const turnOnEditIndex = state.posts.findIndex(item => item.postId === action.postId)\n                if (turnOnEditIndex === -1) {\n                    alert('Cannot find post to edit')\n                    return {...state}\n                }\n\n                const newPostsAfterTurningEditModeOn = state.posts;\n                newPostsAfterTurningEditModeOn[turnOnEditIndex].editMode = true;\n                return {...state, posts: newPostsAfterTurningEditModeOn, reRenderTimes: state.reRenderTimes + 1}\n            case 'turnOffEditMode':\n                const turnOffEditIndex = state.posts.findIndex(item => item.postId === action.postId)\n                if (turnOffEditIndex === -1) {\n                    alert('Cannot find post to edit')\n                    return {...state}\n                }\n\n                const newPostsAfterTurningEditModeOff = state.posts;\n                newPostsAfterTurningEditModeOff[turnOffEditIndex].editMode = false;\n                return {...state, posts: newPostsAfterTurningEditModeOff, reRenderTimes: state.reRenderTimes + 1}\n            default:\n                throw new Error((action.type + ' is not a valid action for textPostReducer'))\n        }\n    }\n    \n    const textPostReducerInitialState = {\n        posts: null,\n        error: null,\n        loading: false,\n        reRenderTimes: 0\n    }\n    \n    const imagePostReducer = (state, action) => {\n        switch(action.type) {\n            case 'error':\n                console.error(action.error)\n                return {...state, error: action.error, loading: false}\n            case 'nowLoading':\n                return {...state, loading: true, error: null}\n            case 'addPosts':\n                console.log(action.result)\n                if (Array.isArray(action.result) && action.result.length > 0) {\n                    const newTextPosts = Array.isArray(state.posts) ? _.cloneDeep(state.posts) : []\n                    newTextPosts.push(...action.result)\n                    return {...state, posts: newTextPosts, loading: false, error: null}\n                } else return Array.isArray(state.posts) ? {...state, posts: [...action.result, ...state.posts], loading: false, error: null} : {...state, posts: []}\n            case 'likePost':\n                const likePostIndex = state.posts.findIndex(item => item.postId === action.postId)\n                if (likePostIndex === -1) {\n                    alert('Cannot find post to like')\n                    return\n                }\n\n                const newPostsAfterLike = state.posts;\n                newPostsAfterLike[likePostIndex].liked = true;\n                \n                return {...state, posts: newPostsAfterLike, reRenderTimes: state.reRenderTimes + 1}\n            case 'unlikePost':\n                const unlikePostIndex = state.posts.findIndex(item => item.postId === action.postId)\n                if (unlikePostIndex === -1) {\n                    alert('Cannot find post to like')\n                    return\n                }\n                \n                const newPostsAfterUnlike = state.posts;\n                newPostsAfterUnlike[unlikePostIndex].liked = false;\n                \n                return {...state, posts: newPostsAfterUnlike, reRenderTimes: state.reRenderTimes + 1}\n            case 'deletePost':\n                const deletePostIndex = state.posts.findIndex(item => item.postId === action.postId)\n                if (deletePostIndex === -1) {\n                    alert('Cannot find post to delete')\n                    return {...state}\n                }\n\n                const newPostsAfterDelete = state.posts;\n                newPostsAfterDelete.splice(deletePostIndex, 1)\n\n                return {...state, posts: newPostsAfterDelete, reRenderTimes: state.reRenderTimes + 1}\n            case 'turnOnEditMode':\n                const turnOnEditIndex = state.posts.findIndex(item => item.postId === action.postId)\n                if (turnOnEditIndex === -1) {\n                    alert('Cannot find post to edit')\n                    return {...state}\n                }\n\n                const newPostsAfterTurningEditModeOn = state.posts;\n                newPostsAfterTurningEditModeOn[turnOnEditIndex].editMode = true;\n                return {...state, posts: newPostsAfterTurningEditModeOn, reRenderTimes: state.reRenderTimes + 1}\n            case 'turnOffEditMode':\n                const turnOffEditIndex = state.posts.findIndex(item => item.postId === action.postId)\n                if (turnOffEditIndex === -1) {\n                    alert('Cannot find post to edit')\n                    return {...state}\n                }\n\n                const newPostsAfterTurningEditModeOff = state.posts;\n                newPostsAfterTurningEditModeOff[turnOffEditIndex].editMode = false;\n                return {...state, posts: newPostsAfterTurningEditModeOff, reRenderTimes: state.reRenderTimes + 1}\n            default:\n                throw new Error((action.type + ' is not a valid action for textPostReducer'))\n        }\n    }\n    \n    const imagePostReducerInitialState = {\n        posts: null,\n        error: null,\n        loading: false,\n        reRenderTimes: 0\n    }\n\n    const [textPostState, dispatchTextPostUpdate] = useReducer(textPostReducer, textPostReducerInitialState)\n    const [imagePostState, dispatchImagePostUpdate] = useReducer(imagePostReducer, imagePostReducerInitialState)\n\n    const loadPosts = {\n        textPosts: () => {\n            if (textPostState.loading === false) {\n                dispatchTextPostUpdate({type: 'nowLoading'})\n\n                axios.get(`http://localhost:8080/user/textPostsByUserName/?username=${name}&skip=${Array.isArray(textPostState.posts) ? textPostState.posts.length : 0}&publicId=${publicId}`)\n                .then(response => response.data.data)\n                .then(result => {\n                    dispatchTextPostUpdate({\n                        type: 'addPosts',\n                        result\n                    })\n                })\n                .catch(error => {\n                    dispatchTextPostUpdate({\n                        type: 'error',\n                        error: error?.response?.data?.error || String(error)\n                    })\n                })\n            }\n        },\n        imagePosts: () => {\n            if (imagePostState.loading === false) {\n                dispatchImagePostUpdate({type: 'nowLoading'})\n\n                axios.get(`http://localhost:8080/user/imagePostsByUserName/?username=${name}&skip=${Array.isArray(imagePostState.posts) ? imagePostState.posts.length : 0}&publicId=${publicId}`)\n                .then(response => response.data.data)\n                .then(result => {\n                    dispatchImagePostUpdate({\n                        type: 'addPosts',\n                        result\n                    })\n                }).catch(error => {\n                    dispatchImagePostUpdate({\n                        type: 'error',\n                        error: error?.response?.data?.error || String(error)\n                    })\n                })\n            }\n        }\n    }\n\n    useEffect(() => {\n        loadPosts.textPosts()\n    }, [])\n\n    const handleViewChange = (event, nextView) => {\n        if (nextView !== view && nextView !== null) {\n            setView(nextView)\n            if (nextView === 'textPosts' && textPostState.posts === null) loadPosts.textPosts()\n            if (nextView === 'imagePosts' && imagePostState.posts === null) loadPosts.imagePosts()\n        }\n        if (nextView === null) {\n            loadPosts[view]();\n        }\n    }\n\n    const DisplayTextPosts = useMemo(() => {\n        return Array.isArray(textPostState.posts) ? textPostState.posts.map((post, index) => (\n            <Fragment key={index.toString()}>\n                <TextPost {...post} publicId={publicId} dispatch={dispatchTextPostUpdate} userId={_id}/>\n            </Fragment>\n        )) : null\n    }, [textPostState.posts, textPostState.reRenderTimes])\n\n    const DisplayImagePosts = useMemo(() => {\n        return Array.isArray(imagePostState.posts) ? imagePostState.posts.map((post, index) => (\n            <Fragment key={index.toString()}>\n                <ImagePost {...post} publicId={publicId} dispatch={dispatchImagePostUpdate} userId={_id}/>\n            </Fragment>\n        )) : null\n    }, [imagePostState.posts, imagePostState.reRenderTimes])\n\n    useEffect(() => {\n        console.log(profileImageToUpload[0])\n        if (profileImageToUpload[0]) {\n            setProfileImageUploading(true)\n            const toSend = new FormData();\n\n            toSend.append('image', profileImageToUpload[0])\n            toSend.append('_id', _id)\n\n            axios.post('http://localhost:8080/user/updateProfileImage', toSend, {\n                headers: {\n                    Accept: 'application/json',\n                    'Content-Type': 'multipart/form-data'\n                }\n            }).then(response => response.data.data)\n            .then(result => {\n                const newStoredCredentials = _.cloneDeep(storedCredentials)\n                newStoredCredentials.profileImageKey = result\n                if (localStorage.getItem('SebMediaCredentials')) {\n                    localStorage.setItem('SebMediaCredentials', JSON.stringify(newStoredCredentials))\n                }\n                setStoredCredentials(newStoredCredentials)\n                setProfileImageUploading(false)\n            })\n            .catch(error => {\n                alert('Error uploading profile image: ' + (error?.response?.data?.error || String(error)))\n                console.error(error)\n                setProfileImageUploading(false)\n            })\n        }\n    }, [profileImageToUpload])\n\n    return (\n        <>\n            <FlexRowSpaceAroundDiv>\n                <FlexRowCentreDiv>\n                    <h1>{name}</h1>\n                    {profileImageUploading || profileImageFileLoading ?\n                        <Box sx={{display: 'flex', justifyContent: 'center', width: 40, height: 40, marginLeft: 1}}>\n                            <CircularProgress/>\n                        </Box>\n                    :\n                        <img onClick={() => openProfileImageFileSelector()} src={profileImageKey ? `http://localhost:8080/image/${profileImageKey}` : defaultPfp} style={{width: 50, height: 50, borderRadius: '100%', marginLeft: 10, cursor: 'pointer'}}/>\n                    }\n                </FlexRowCentreDiv>\n                <FlexColumnCentreDiv>\n                    <H3NoMargin>{followers.length}</H3NoMargin>\n                    <H3NoMargin>Followers</H3NoMargin>\n                </FlexColumnCentreDiv>\n                <FlexColumnCentreDiv>\n                    <H3NoMargin>{following.length}</H3NoMargin>\n                    <H3NoMargin>Following</H3NoMargin>\n                </FlexColumnCentreDiv>\n            </FlexRowSpaceAroundDiv>\n            <ToggleButtonGroup\n                color=\"primary\"\n                value={view}\n                exclusive\n                onChange={handleViewChange}\n                fullWidth\n                sx={{mb: 3}}\n            >\n                <ToggleButton value=\"textPosts\" sx={{color: darkMode ? 'white' : 'black', borderColor: darkMode ? 'white' : 'black'}}>Text Posts</ToggleButton>\n                <ToggleButton value=\"imagePosts\" sx={{color: darkMode ? 'white' : 'black', borderColor: darkMode ? 'white' : 'black'}}>Image Posts</ToggleButton>\n            </ToggleButtonGroup>\n            {view === 'textPosts' ?\n                <>\n                    {\n                        textPostState.error ?\n                            <h1 style={{color: 'red', textAlign: 'center'}}>{textPostState.error}</h1>\n                        : textPostState.loading ?\n                            <Box sx={{display: 'flex', justifyContent: 'center', mt: 3}}>\n                                <CircularProgress/>\n                            </Box>\n                        : Array.isArray(textPostState.posts) && textPostState.posts.length === 0 ?\n                            <h1 style={{textAlign: 'center'}}>{name} has no text posts.</h1>\n                        :\n                            <Grid container spacing={2}>\n                                {DisplayTextPosts}\n                            </Grid>\n                    }\n                </>\n            : view === 'imagePosts' ?\n                <>\n                    {\n                        imagePostState.error ?\n                            <h1 style={{color: 'red', textAlign: 'center'}}>{imagePostState.error}</h1>\n                        : imagePostState.loading ? \n                            <Box sx={{display: 'flex', justifyContent: 'center', mt: 3}}>\n                                <CircularProgress/>\n                            </Box>\n                        : Array.isArray(imagePostState.posts) && imagePostState.posts.length === 0 ?\n                            <h1 style={{textAlign: 'center'}}>{name} has no image posts.</h1>\n                        :\n                            <Grid container spacing={2}>\n                                {DisplayImagePosts}\n                            </Grid>\n                    }\n                </>\n            : <h1>Pretty big error occured</h1>}\n        </>\n    )\n}\n\nexport default Profile;"],"mappings":"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"},"metadata":{},"sourceType":"module"}