{"ast":null,"code":"var _jsxFileName = \"/Users/sebastianwebster/GitHub/SebMedia-2.0/frontend/src/routes/CreateImagePost.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext, useEffect } from 'react';\nimport { CredentialsContext } from '../context/CredentialsContext';\nimport useInput from '../hooks/useInput';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport { Box, CircularProgress, TextField } from '@mui/material';\nimport { useFilePicker } from 'use-file-picker';\nimport AddIcon from '@mui/icons-material/Add';\nimport Fab from '@mui/material/Fab';\nimport ImagePost from '../components/ImagePost';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst CreateImagePost = () => {\n  _s();\n\n  const {\n    storedCredentials,\n    setStoredCredentials\n  } = useContext(CredentialsContext);\n  const {\n    _id\n  } = storedCredentials;\n  const [imagePreview, setImagePreview] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [title, bindTitle] = useInput('', 'title');\n  const [body, bindBody] = useInput('', 'body');\n  const navigate = useNavigate();\n  const [openFilePicker, {\n    plainFiles: imageToUpload\n  }] = useFilePicker({\n    accept: 'image/jpeg',\n    multiple: false\n  });\n\n  const uploadImagePost = e => {\n    e.preventDefault();\n    setLoading(true);\n    const toSend = new FormData();\n    toSend.append('image', imageToUpload[0]);\n    toSend.append('title', title);\n    toSend.append('body', body);\n    toSend.append('userId', _id);\n    axios.post('http://localhost:8080/user/imagePost', toSend, {\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'multipart/form-data'\n      }\n    }).then(result => {\n      navigate('/home');\n    }).catch(error => {\n      var _error$response, _error$response$data;\n\n      console.error(error);\n      setError((error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || String(error));\n      setLoading(false);\n    });\n  };\n\n  useEffect(() => {\n    if (imageToUpload[0]) {\n      var file = imageToUpload[0];\n      var reader = new FileReader();\n      reader.readAsDataURL(file);\n\n      reader.onloadend = e => {\n        setImagePreview(reader.result);\n      };\n    }\n  }, [imageToUpload]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Create Image Post\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }, this), loading ? /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: 'flex',\n        justifyContent: 'center'\n      },\n      children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: uploadImagePost,\n        style: {\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n          flexDirection: 'column'\n        },\n        children: [/*#__PURE__*/_jsxDEV(TextField, { ...bindTitle\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(TextField, { ...bindBody,\n          multiline: true,\n          style: {\n            marginBottom: 10\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 25\n        }, this), imagePreview && /*#__PURE__*/_jsxDEV(\"img\", {\n          src: imagePreview,\n          style: {\n            maxWidth: '30vh',\n            maxHeight: '30vh'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 42\n        }, this), /*#__PURE__*/_jsxDEV(Fab, {\n          color: \"secondary\",\n          \"aria-label\": \"add\",\n          variant: \"extended\",\n          onClick: openFilePicker,\n          children: [/*#__PURE__*/_jsxDEV(AddIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 29\n          }, this), \"Image\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Fab, {\n          color: \"primary\",\n          \"aria-label\": \"submit\",\n          type: \"submit\",\n          variant: \"extended\",\n          sx: {\n            mt: 2\n          },\n          children: [/*#__PURE__*/_jsxDEV(AddIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 29\n          }, this), \"Submit\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 25\n        }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: 'red'\n          },\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 35\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Preview:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 21\n      }, this), title && body && imagePreview ? /*#__PURE__*/_jsxDEV(ImagePost, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 25\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Preview is waiting for a title, body, AND image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            justifyContent: 'center'\n          },\n          children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true)]\n  }, void 0, true);\n};\n\n_s(CreateImagePost, \"6R3vtxThZFI8PmyUi8bLhHcs+bc=\", false, function () {\n  return [useInput, useInput, useNavigate, useFilePicker];\n});\n\n_c = CreateImagePost;\nexport default CreateImagePost;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreateImagePost\");","map":{"version":3,"names":["React","useState","useContext","useEffect","CredentialsContext","useInput","axios","useNavigate","Box","CircularProgress","TextField","useFilePicker","AddIcon","Fab","ImagePost","CreateImagePost","storedCredentials","setStoredCredentials","_id","imagePreview","setImagePreview","loading","setLoading","error","setError","title","bindTitle","body","bindBody","navigate","openFilePicker","plainFiles","imageToUpload","accept","multiple","uploadImagePost","e","preventDefault","toSend","FormData","append","post","headers","Accept","then","result","catch","console","response","data","String","file","reader","FileReader","readAsDataURL","onloadend","display","justifyContent","alignItems","flexDirection","marginBottom","maxWidth","maxHeight","mt","color"],"sources":["/Users/sebastianwebster/GitHub/SebMedia-2.0/frontend/src/routes/CreateImagePost.js"],"sourcesContent":["import React, {useState, useContext, useEffect} from 'react';\nimport { CredentialsContext } from '../context/CredentialsContext';\nimport useInput from '../hooks/useInput';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport { Box, CircularProgress, TextField } from '@mui/material';\nimport { useFilePicker } from 'use-file-picker';\nimport AddIcon from '@mui/icons-material/Add';\nimport Fab from '@mui/material/Fab';\nimport ImagePost from '../components/ImagePost';\n\nconst CreateImagePost = () => {\n    const {storedCredentials, setStoredCredentials} = useContext(CredentialsContext);\n    const {_id} = storedCredentials;\n    const [imagePreview, setImagePreview] = useState(null)\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(null)\n    const [title, bindTitle] = useInput('', 'title')\n    const [body, bindBody] = useInput('', 'body')\n    const navigate = useNavigate();\n    const [openFilePicker, { plainFiles: imageToUpload }] = useFilePicker({accept: 'image/jpeg', multiple: false})\n\n    const uploadImagePost = (e) => {\n        e.preventDefault()\n\n        setLoading(true)\n\n        const toSend = new FormData();\n\n        toSend.append('image', imageToUpload[0])\n        toSend.append('title', title)\n        toSend.append('body', body)\n        toSend.append('userId', _id)\n\n        axios.post('http://localhost:8080/user/imagePost', toSend, {\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'multipart/form-data'\n            }\n        }).then(result => {\n            navigate('/home')\n        }).catch(error => {\n            console.error(error)\n            setError(error?.response?.data?.error || String(error))\n            setLoading(false)\n        })\n    }\n\n    useEffect(() => {\n        if (imageToUpload[0]) {\n            var file = imageToUpload[0]\n            var reader = new FileReader();\n            reader.readAsDataURL(file);\n            reader.onloadend = (e) => {\n                setImagePreview(reader.result)\n            }\n        }\n    }, [imageToUpload])\n\n    return (\n        <>\n            <h1>Create Image Post</h1>\n            {loading ? \n                <Box sx={{display: 'flex', justifyContent: 'center'}}>\n                    <CircularProgress/>\n                </Box>\n            :\n                <>\n                    <form onSubmit={uploadImagePost} style={{display: 'flex', justifyContent: 'center', alignItems: 'center', flexDirection: 'column'}}>\n                        <TextField {...bindTitle}/>\n                        <TextField {...bindBody} multiline style={{marginBottom: 10}}/>\n                        {imagePreview && <img src={imagePreview} style={{maxWidth: '30vh', maxHeight: '30vh'}}/>}\n                        <Fab color=\"secondary\" aria-label=\"add\" variant=\"extended\" onClick={openFilePicker}>\n                            <AddIcon />\n                            Image\n                        </Fab>\n                        <Fab color=\"primary\" aria-label=\"submit\" type=\"submit\" variant=\"extended\" sx={{mt: 2}}>\n                            <AddIcon />\n                            Submit\n                        </Fab>\n                        {error && <p style={{color: 'red'}}>{error}</p>}\n                    </form>\n                    <h2>Preview:</h2>\n                    {title && body && imagePreview ?\n                        <ImagePost/>\n                    :\n                        <>\n                            <h2>Preview is waiting for a title, body, AND image</h2>\n                            <Box sx={{justifyContent: 'center'}}>\n                                <CircularProgress/>\n                            </Box>\n                        </>\n                    }\n                </>\n            }\n        </>\n    )\n}\n\nexport default CreateImagePost;"],"mappings":"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"},"metadata":{},"sourceType":"module"}